# ═══════════════════════════════════════════════════════════════════════════════
# Gelka Enerji API - Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════════
# Copy to .env and fill in your values

# Environment
ENV=dev  # dev | staging | prod

# ═══════════════════════════════════════════════════════════════════════════════
# Database
# ═══════════════════════════════════════════════════════════════════════════════
# SQLite (dev)
DATABASE_URL=sqlite:///./gelka_enerji.db

# PostgreSQL (prod)
# DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:5432/invoice_db

# ═══════════════════════════════════════════════════════════════════════════════
# OpenAI
# ═══════════════════════════════════════════════════════════════════════════════
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4o-2024-08-06
OPENAI_MAX_RETRIES=3
OPENAI_RETRY_DELAY=1.0

# ═══════════════════════════════════════════════════════════════════════════════
# API Authentication
# ═══════════════════════════════════════════════════════════════════════════════
API_KEY=dev-key
API_KEY_ENABLED=false

# ═══════════════════════════════════════════════════════════════════════════════
# Storage
# ═══════════════════════════════════════════════════════════════════════════════
# Backend: local | s3
STORAGE_BACKEND=local
STORAGE_DIR=./storage

# S3/MinIO (when STORAGE_BACKEND=s3)
S3_ENDPOINT_URL=http://localhost:9000
S3_REGION=us-east-1
S3_ACCESS_KEY=minio
S3_SECRET_KEY=minio123456
S3_BUCKET=invoices

# ═══════════════════════════════════════════════════════════════════════════════
# Redis (Optional - for RQ worker)
# ═══════════════════════════════════════════════════════════════════════════════
# Leave empty to use DB polling worker
REDIS_URL=
# REDIS_URL=redis://localhost:6379/0

# ═══════════════════════════════════════════════════════════════════════════════
# Worker
# ═══════════════════════════════════════════════════════════════════════════════
WORKER_POLL_INTERVAL=1.0

# ═══════════════════════════════════════════════════════════════════════════════
# Cache
# ═══════════════════════════════════════════════════════════════════════════════
EXTRACTION_CACHE_ENABLED=true

# ═══════════════════════════════════════════════════════════════════════════════
# Extraction
# ═══════════════════════════════════════════════════════════════════════════════
# Prompt version: v1, v2, v3, v4
EXTRACTION_PROMPT_VERSION=v3

# Extraction mode: standard | sectioned
# standard: Tek prompt ile tüm fatura (mevcut)
# sectioned: 3 section (özet, fatura_detayi, vergiler) ayrı ayrı (experimental)
EXTRACTION_MODE=standard

# ═══════════════════════════════════════════════════════════════════════════════
# PDF Generation
# ═══════════════════════════════════════════════════════════════════════════════
# Primary: WeasyPrint (requires Cairo/Pango system libs)
# Fallback: Playwright/Chromium (works everywhere)
#
# Windows setup (Playwright fallback):
#   pip install playwright
#   python -m playwright install chromium
#
# Linux/Docker: WeasyPrint works out of the box with apt packages

# ═══════════════════════════════════════════════════════════════════════════════
# Rate Limiting
# ═══════════════════════════════════════════════════════════════════════════════
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# ═══════════════════════════════════════════════════════════════════════════════
# Multi-tenant
# ═══════════════════════════════════════════════════════════════════════════════
# MVP: tenant_required=false (X-Tenant-Id optional)
# Prod: tenant_required=true (X-Tenant-Id required)
TENANT_REQUIRED=false
DEFAULT_TENANT=default
